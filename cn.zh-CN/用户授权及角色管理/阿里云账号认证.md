---
keyword: [阿里云账号认证, Hologres]
---

# 阿里云账号认证

交互式分析Hologres和阿里云账号体系深度集成，Hologres的可登录角色是通过阿里云来进行用户认证的。在Hologres中，数据库角色可以是一个阿里云账号（例如`abc@aliyun.com`）或者子账号（例如`RAM$abc@aliyun.com:subuser1`\)，也可以是一个自己命名的用户组（例如`developer`）。本文为您介绍在Hologres中使用到的阿里云账号体系。

## 用户显示名称

Hologres中用户的显示名称如下：

-   主账号`abc@aliyun.com`。
-   子账号`RAM$abcaliyun.com:subuser1`。

用户显示名称的说明如下：

-   阿里云主账号的格式为`"abc@aliyun.com"`或者`"ALIYUN$abc@aliyun.com"`。

    在某些情况下，阿里云账号系统允许创建非E-mail格式的主账号，例如`user1`，但是必须加上`ALIYUN$`前缀标识，即`ALIYUN$user1`。

-   阿里云子账号的显示名称格式如下：
    -   `RAM$主账号显示名称：子账号名称`。此处主账号显示名称的格式为上文所述，但是不添加`ALIYUN$`前缀。例如，`RAM$abc@aliyun.com:subuser1`就是一个子账号显示名称，其中主账号是`abc@aliyun.com`，子账号是`subuser1`。
    -   `RAM$主账号Account ID：子账号名称`。例如`RAM$1898137152164646:subuser1`为一个子账号显示名称，其中主账号的Account ID为`1898137152164646`，子账号为`subuser1`。

在Hologres中，您可以使用用户的显示名称为用户授予`CREATE、ALTER、DROP ROLE或USER`等操作的权限。例如，为一个阿里云子账号创建同名的Hologres角色，语句如下。

```
CREATE USER "RAM$abc@aliyun.com:subuser1";
```

**说明：** ：

-   如果里云账号名称包含`$`及`@`等字符，必须使用双引号引起来。
-   阿里云账号必须是阿里云账号体系中已存在的账号。如果您要访问Hologres，必须在阿里云账号体系中先创建一个阿里云账号，然后在Hologres中执行`CREATE USER`进行授权。
-   Hologres依赖于阿里云账号体系进行用户认证，所以在Hologres中不需要为角色设置密码，认证由阿里云账号体系完成。
-   如果在Hologres中创建一个可登录（LOGIN）的角色，但角色名并不是一个合法的阿里云用户名称，则该角色因为未通过阿里云认证导致无法登录。
-   其他不可登录的Hologres角色并不需要使用阿里云账号。

您可以在Hologres中使用如下命令查看当前账号的用户显示名称。

```
SELECT user_display_name(current_user);
```

## Account ID

Account ID又称为账号ID，是一串数字，例如主账号`189813715xxxx`，在阿里云官网的[用户信息页面](https://account.console.aliyun.com/?spm=5176.cngpdb.amxosvpfn.21.4ad17cacTR7tmU#/secure)可以查看。

![725](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/6091752061/p95289.png)

子账号的Account ID为对应子账号的UID，可以在访问控制页面的[用户页面](https://ram.console.aliyun.com/users)查看。在Hologres中，要使用子账号UID授权时，格式必须为`p4_UID`，例如`p4_12333388xxx`。

![726](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/6091752061/p95292.png)

Hologres可以使用Account ID为用户授权，示例语句如下。

```
create USER "189813715xxxx"; //将主账号189813715xxxx创建至Hologres。
create USER "p4_12333388xxx" superuser;//将子账号12333388xxx授权为实例的Superuser。
```

在Hologres中执行如下语句，查看当前账号的Account ID。

```
SELECT current_user;
```

## AccessKey ID及AccessKey Secret

阿里云AccessKey ID和AccessKey Secret用于连接访问Hologres实例。AccessKey ID类似登录账号，AccessKey Secret类似登录密码，可以在阿里云官网[Access Key管理](https://usercenter.console.aliyun.com/?spm=a2c8b.12215442.nav-right.dak.18fb6253I8gJRw#/manage/ak)查看。

AccessKey ID及AccessKey Secret是阿里云颁发的访问凭证，有一定的使用期限。如果AccessKey ID及AccessKey Secret过期，您可以参见[准备阿里云账号](/cn.zh-CN/准备工作/准备阿里云账号.md)重新创建。

示例使用psql访问Hologres实例，连接语句如下。

```
PGUSER=<AccessID> PGPASSWORD=<AccessKey> psql -p <Port> -h <Endpoint> -d <Database>
```

